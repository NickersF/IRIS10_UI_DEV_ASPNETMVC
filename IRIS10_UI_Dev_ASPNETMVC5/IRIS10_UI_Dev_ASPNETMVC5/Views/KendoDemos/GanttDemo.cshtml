
@{
    Layout = null;
}

@using IRIS10_UI_Dev_ASPNETMVC5.Models
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>GanttDemo</title>
</head>
<body>
    <main class="container-fluid">
        <section id="ganttContainer" class="row">
            <div class="col">
                @(Html.Kendo().Gantt<TaskViewModel, DependencyViewModel>()
                    .Name("gantt")
                    .Columns(columns =>
                    {
                        columns.Bound(c => c.Title).Editable(true).Sortable(true);
                        columns.Resources("resources").Editable(true).Title("Assigned Resources");
                        columns.Bound(c => c.Start).Width(100).Editable(true).Sortable(true);
                        columns.Bound(c => c.End).Width(100).Editable(true).Sortable(true);
                    })
                    .Views(views =>
                    {
                        views.DayView();
                        views.WeekView(weekView => weekView.Selected(true));
                        views.MonthView();
                    })
                    .Height(700)
                    .RowHeight(62)
                    .ShowWorkHours(false)
                    .ShowWorkDays(false)
                    .Snap(false)
                    .Pdf(pdf => pdf
                        .FileName("Kendo UI Gantt Export.pdf")
                        .ProxyURL(Url.Action("Pdf_Export_Save", "Gantt"))
                    )
                    .Resizable(true)
                    .DataSource(d => d
                        .Model(m =>
                        {
                            m.Id(f => f.TaskID);
                            m.ParentId(f => f.ParentID);
                            m.Field(f => f.Expanded).DefaultValue(true);
                        })
                        .Read("ReadTasks", "Gantt")
                        .Create("CreateTask", "Gantt")
                        .Destroy("DestroyTask", "Gantt")
                        .Update("UpdateTask", "Gantt")
                    )
                    .DependenciesDataSource(d => d
                        .Model(m =>
                        {
                            m.Id(f => f.DependencyID);
                            m.PredecessorId(f => f.PredecessorID);
                            m.SuccessorId(f => f.SuccessorID);
                        })
                        .Read("ReadDependencies", "Gantt")
                        .Create("CreateDependency", "Gantt")
                        .Destroy("DestroyDependency", "Gantt")
                    )
                    .Resources(r => r
                        .Field("resources")
                        .DataColorField("Color")
                        .DataTextField("Name")
                        .DataSource(d => d
                            .Custom()
                            .Schema(s => s
                                .Model(m => m.Id("ID"))
                                .Data("Data")
                            )
                            .Transport(t =>
                            {
                                t.Read("ReadResources", "Gantt");
                            })
                        )
                    )
                    .Assignments<ResourceAssignmentViewModel>(a => a
                        .DataTaskIdField("TaskID")
                        .DataResourceIdField("ResourceID")
                        .DataValueField("Units")
                        .DataSource(d => d
                            .Model(m =>
                            {
                                m.Id(f => f.ID);
                            })
                            .Read("ReadAssignments", "Gantt")
                            .Create("CreateAssignment", "Gantt")
                            .Destroy("DestroyAssignment", "Gantt")
                            .Update("UpdateAssignment", "Gantt")
                        )
                    )
                )
            </div>
        </section>
    </main>
</body>
</html>
